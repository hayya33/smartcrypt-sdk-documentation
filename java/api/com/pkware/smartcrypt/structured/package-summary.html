<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_212) on Mon Jul 01 22:26:45 CEST 2019 -->
<title>com.pkware.smartcrypt.structured (Smartcrypt SDK 2019.7.1)</title>
<meta name="date" content="2019-07-01">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="com.pkware.smartcrypt.structured (Smartcrypt SDK 2019.7.1)";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/pkware/smartcrypt/protocol/package-summary.html">Prev&nbsp;Package</a></li>
<li><a href="../../../../com/pkware/smartcrypt/unstructured/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/pkware/smartcrypt/structured/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<p><a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/ParametersAreNonnullByDefault.html?is-external=true" title="class or interface in javax.annotation">@ParametersAreNonnullByDefault</a>
</p>
<h1 title="Package" class="title">Package&nbsp;com.pkware.smartcrypt.structured</h1>
<div class="docSummary">
<div class="block">Authenticated, length preserving, and format preserving encryption suited for databases, XML/JSON documents, etc.</div>
</div>
<p>See:&nbsp;<a href="#package.description">Description</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Interface Summary table, listing interfaces, and an explanation">
<caption><span>Interface Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../com/pkware/smartcrypt/structured/AuthenticatedEncryption.html" title="interface in com.pkware.smartcrypt.structured">AuthenticatedEncryption</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../com/pkware/smartcrypt/structured/FormatPreservingEncryption.html" title="interface in com.pkware.smartcrypt.structured">FormatPreservingEncryption</a></td>
<td class="colLast">
<div class="block">Format preserving data encryption library.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../com/pkware/smartcrypt/structured/LengthPreservingEncryption.html" title="interface in com.pkware.smartcrypt.structured">LengthPreservingEncryption</a></td>
<td class="colLast">
<div class="block">AES CFB without padding.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../com/pkware/smartcrypt/structured/SmartcryptStructuredData.html" title="interface in com.pkware.smartcrypt.structured">SmartcryptStructuredData</a></td>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Class Summary table, listing classes, and an explanation">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../com/pkware/smartcrypt/structured/EncryptionInputStreamResult.html" title="class in com.pkware.smartcrypt.structured">EncryptionInputStreamResult</a></td>
<td class="colLast">
<div class="block">This class servers only as a data container.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../com/pkware/smartcrypt/structured/EncryptionOutputStreamResult.html" title="class in com.pkware.smartcrypt.structured">EncryptionOutputStreamResult</a></td>
<td class="colLast">
<div class="block">This class servers only as a data container.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../com/pkware/smartcrypt/structured/EncryptionResult.html" title="class in com.pkware.smartcrypt.structured">EncryptionResult</a></td>
<td class="colLast">
<div class="block">This class servers only as a data container.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../com/pkware/smartcrypt/structured/SmartcryptStructuredDataImpl.html" title="class in com.pkware.smartcrypt.structured">SmartcryptStructuredDataImpl</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../com/pkware/smartcrypt/structured/SmartcryptStructuredDataImpl.Builder.html" title="class in com.pkware.smartcrypt.structured">SmartcryptStructuredDataImpl.Builder</a></td>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package.description">
<!--   -->
</a>
<h2 title="Package com.pkware.smartcrypt.structured Description">Package com.pkware.smartcrypt.structured Description</h2>
<div class="block">Authenticated, length preserving, and format preserving encryption suited for databases, XML/JSON documents, etc.
 <p>
 The Smartcrypt Structured Data component is particularly useful when encrypting data stored in a structured container
 such as in a JSON property or a database column. The component makes it easy to work with specific types of data and
 offers the ability to store encryption key information with minimal cipher text size increases.
 <p>
 There are 3 specific encryption offerings for structured data: authenticated, length preserving, and format
 preserving. For most use cases, authenticated encryption is the best option; unless you have specific needs requiring
 other types of encryption, use authenticated.

 <h2>Authenticated Encryption</h2>
 Authenticated encryption uses AES-GCM. When using authenticated encryption, not only is your data encrypted, but its
 authenticity is validated during decryption, making it impossible for the cipher text to be tampered with undetected.
 The SDK takes care of correctly generating nonce values.

 <pre class="brush:java"><code>MetaClient metaClient = new NativeMetaClient.Builder()
         .appName("AuthenticatedEncryptionSample")
         .appVersion("9.99.9999")
         .deviceName(UUID.randomUUID().toString())
         .deviceUniqueId(UUID.randomUUID().toString())
         .platform(Platform.LINUX)
         .platformVersion("0")
         .build();
 SmartcryptKeyManagement smartcryptKeyManagement = new SmartcryptKeyManagementImpl.Builder()
         .metaClient(metaClient)
         .persistenceCallback(new InMemoryPersistenceCallback())
         .build();

 AccountManagement accountManagement = smartcryptKeyManagement.getAccountManagement();
 accountManagement.loginManagedAccount("&lt;your username&gt;", "&lt;your password&gt;");

 Smartkeys smartkeys = smartcryptKeyManagement.getSmartkeys();
 Observable&lt;Smartkey&gt; smartKey = smartkeys.listAll()
         .map(keys -&gt; {
             for (Smartkey key : keys) {
                 if (key instanceof PrivateSmartkey
                         &amp;&amp; key.canDecrypt()
                         &amp;&amp; key.canEncrypt()) {
                     return Optional.of(key);
                 }
             }
             return Optional.&lt;Smartkey&gt;empty();
         })
         .filter(Optional::isPresent)
         .map(Optional::get);

 SmartcryptStructuredData smartcryptStructuredData = new SmartcryptStructuredDataImpl.Builder()
         .dataStorage(smartcryptKeyManagement.getDataStorage())
         .build();

 AuthenticatedEncryption ae = smartcryptStructuredData.newAuthenticatedEncryption(smartKey);
 EncryptionResult encrypted = ae.encrypt(utf8("Hello, world!"));

 // Be sure to save all the information returned from Encrypt
 System.out.println("Nonce in Base64: " + base64(encrypted.nonce));
 System.out.println("Key revision: " + encrypted.keyRevision);
 System.out.println("Ciphertext in Base64: " + base64(encrypted.encryptedContent));

 byte[] decrypted = ae.decrypt(encrypted.encryptedContent, encrypted.nonce, encrypted.keyRevision);
 System.out.println("Decrypted message: " + utf8(decrypted));
 </code></pre>

 <h2>Length Preserving Encryption</h2>
 Length preserving encryption produces a cipher text that has the same number of bytes as the input text. This is
 useful if you do not have control over the size of the cipher text storage container such as the size of the database
 column. However, there are <a href="https://sdk.smartcrypt.com/java/flpe.html">risks to using length preserving encryption</a>.

 <h2>Format Preserving Encryption</h2>
 Format preserving encryption produces cipher text in the same format as the plain text. For example, if encrypting
 credit card numbers, the cipher text for each encryption will still be in the format of a valid credit card number.
 For some input types such as credit cards and social security numbers, the cipher text will still pass relevant
 checksum tests such as the Luhn check.
 <p>
 Format preserving encryption is useful if you do not have control over the size of the cipher text storage container
 such as the size of the database column. However, there are
 <a href="https://sdk.smartcrypt.com/java/flpe.html">risks to using length preserving encryption</a>.

 <pre class="brush:java"><code>MetaClient metaClient = new NativeMetaClient.Builder()
         .appName("FormatPreservingEncryptionSample")
         .appVersion("1.0.0")
         .deviceName(UUID.randomUUID().toString())
         .deviceUniqueId(UUID.randomUUID().toString())
         .platform(Platform.LINUX)
         .platformVersion("0")
         .build();
 SmartcryptKeyManagement smartcryptKeyManagement = new SmartcryptKeyManagementImpl.Builder()
         .metaClient(metaClient)
         .persistenceCallback(new InMemoryPersistenceCallback())
         .build();

 AccountManagement accountManagement = smartcryptKeyManagement.getAccountManagement();
 accountManagement.loginManagedAccount("&lt;your username&gt;", "&lt;your password&gt;");

 Smartkeys smartkeys = smartcryptKeyManagement.getSmartkeys();
 Observable&lt;Smartkey&gt; smartkey = smartkeys.listAll()
         .map(keys -&gt; {
             for (Smartkey key : keys) {
                 if (key.getFeatures().stream().anyMatch(feature -&gt; Feature.NAME_NON_ROTATABLE.equals(feature.getName()))
                         &amp;&amp; key.canDecrypt()
                         &amp;&amp; key.canEncrypt()) {
                     return Optional.of(key);
                 }
             }
             return Optional.&lt;Smartkey&gt;empty();
         })
         .filter(Optional::isPresent)
         .map(Optional::get);

 SmartcryptStructuredData smartcryptStructuredData = new SmartcryptStructuredDataImpl.Builder()
         .dataStorage(smartcryptKeyManagement.getDataStorage())
         .license("&lt;your license key here&gt;")
         .build();

 FormatPreservingEncryption fpe = smartcryptStructuredData.newFormatPreservingEncryption(smartkey);
 String encrypted1 = fpe.encryptAlphanumeric("Hello, world!", "1");
 String encrypted2 = fpe.encryptAlphanumeric("Hello, world!", "1");
 String encrypted3 = fpe.encryptAlphanumeric("Hello, world!", "2");
 System.out.println("The tweak is important! Encrypted1: " + encrypted1 + ", Encrypted2: " + encrypted2 + ", Encrypted3: " + encrypted3);

 String decrypted1 = fpe.decryptAlphanumeric(encrypted1, "1");
 String decrypted2 = fpe.decryptAlphanumeric(encrypted2, "2");
 String decrypted3 = fpe.decryptAlphanumeric(encrypted3, "2");
 System.out.println("The tweak is important! Decrypted1: " + decrypted1 + ", Decrypted2: " + decrypted2 + ", Decrypted3: " + decrypted3);
 </code></pre></div>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">Copyright 2012-2019, PKWARE, Inc.</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/pkware/smartcrypt/protocol/package-summary.html">Prev&nbsp;Package</a></li>
<li><a href="../../../../com/pkware/smartcrypt/unstructured/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/pkware/smartcrypt/structured/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
